const mongoose = require('mongoose');

const automationRuleSchema = new mongoose.Schema({
  ruleName: { type: String, required: true },
  triggerEvent: { type: String, required: true },
  deviceIds: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Device', required: true }], 
  groupIds: [{ type: mongoose.Schema.Types.ObjectId, ref: 'DeviceGroup' }],
  condition: { type: Map, of: mongoose.Schema.Types.Mixed }, 
  action: { type: Map, of: mongoose.Schema.Types.Mixed },
  enabled: { type: Boolean, default: true },
  timestamp: { type: Date, default: Date.now },
});

const AutomationRule = mongoose.model('AutomationRule', automationRuleSchema);

module.exports = AutomationRule;